{% load widget_tweaks %}
{% load crispy_forms_tags %}

<!-- Content Wrapper -->
<div id="content-wrapper bg-light" class="d-flex flex-column">

<!-- Main Content -->
<div id="content">

<!-- Begin Page Content -->
<div class="container-fluid">

<div class="modal-header">
<h5 class="modal-title text-success">Update Requisition</h5>
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">&times;</span>
</button>
</div>

<div class="modal-body">
    
    
<form method="POST" action="." enctype="multipart/form-data">
{% csrf_token %}
    
<div class="row">
<div class="form-group col-md-4">
{{ form.items|as_crispy_field }}
</div>

<div class="form-group col-md-4">
{{ form.requisition_reason|as_crispy_field }}
</div>

<div class="form-group col-md-4">
{{ form.requesting_staff|as_crispy_field }}
</div>
</div>
    

<div class="row">

<div class="form-group col-md-4">
{{ form.department|as_crispy_field }}
</div>
    
<div class="form-group col-md-4">
{{ form.authorized_by|as_crispy_field }}
</div>

</div>

  
<div class='col-sm-12 col-sm-offset-2'>

<table class='table'> 


{% for item in object.requisitionitem_set.all %}

<tr>

<td>{{ item.item.item_name }}</td>


<td><input type='hidden' name='item' value='{{ item.item.id }}' /><input type='number' class='item-qty' name='qty' value='{{ item.quantity }}' /><input type='submit' class='btn-update btn btn-link' value='Update item' /></td>
<td id='item-line-total-{{ item.item.id }}'>{{ item.line_item_total }}</td>
<td class='text-right' ><a href='{{ item.remove }}'>X</a>
</td>

</tr>



{% endfor %}


</table>

</div>
 

</form>
</div>

   

<div class="modal-footer">
<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
<button type="button" class="submit-btn btn btn-success ml-4 pt-2 pb-1 pr-2"><i class="fa fa-podcast text-white"></i> Update Requisition</button>

</div>
</div>
<!-- /.container-fluid -->
</div>
<!-- End of Main Content -->
</div>